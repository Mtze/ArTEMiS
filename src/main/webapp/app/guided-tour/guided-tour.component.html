<div
    *ngIf="currentTourStep && selectedElementRect && isOrbShowing"
    (mouseenter)="handleOrb()"
    class="tour-orb tour-{{ currentTourStep.orientation }}"
    [style.top.px]="orbTopPosition"
    [style.left.px]="orbLeftPosition"
    [style.transform]="orbTransform"
>
    <div class="tour-orb-ring"></div>
</div>
<div *ngIf="currentTourStep && !isOrbShowing">
    <div class="guided-tour-user-input-mask" (click)="backdropClick($event)"></div>
    <div class="guided-tour-spotlight-overlay" [style.top.px]="overlayTop" [style.left.px]="overlayLeft" [style.height.px]="overlayHeight" [style.width.px]="overlayWidth"></div>
</div>
<div *ngIf="currentTourStep && !isOrbShowing">
    <div
        #tourStep
        *ngIf="currentTourStep"
        class="tour-step tour-{{ currentTourStep.orientation }}"
        [ngClass]="{ 'page-tour-step': !currentTourStep.selector }"
        [style.top.px]="currentTourStep.selector && selectedElementRect ? topPosition : null"
        [style.left.px]="currentTourStep.selector && selectedElementRect ? leftPosition : null"
        [style.width.px]="currentTourStep.selector && selectedElementRect ? calculatedTourStepWidth : null"
        [style.transform]="currentTourStep.selector && selectedElementRect ? transform : null"
    >
        <div *ngIf="currentTourStep.selector" class="tour-arrow"></div>
        <div class="tour-block">
            <div class="headline">
                <h3 jhiTranslate="{{ currentTourStep.titleTranslateKey }}" class="tour-title" *ngIf="currentTourStep.title && currentTourStep.selector">
                    {{ currentTourStep.title }}
                </h3>
                <h3 jhiTranslate="{{ currentTourStep.titleTranslateKey }}" class="tour-title" *ngIf="currentTourStep.title && !currentTourStep.selector">
                    {{ currentTourStep.title }}
                </h3>
                <div class="close" (click)="guidedTourService.skipTour()"></div>
            </div>
            <div class="tour-content">
                <span jhiTranslate="{{ currentTourStep.contentTranslateKey }}">{{ currentTourStep.content }}</span>
            </div>
            <div class="tour-buttons">
                <button [disabled]="guidedTourService.onFirstStep || guidedTourService.onResizeMessage" class="back-button" (click)="guidedTourService.backStep()">
                    <fa-icon icon="chevron-left"></fa-icon>
                    <span>{{ backText }}</span>
                </button>
                <div class="dotstyle dotstyle-scaleup">
                    <ul>
                        <li
                            *ngFor="let i of guidedTourService.currentTourSteps"
                            [ngClass]="guidedTourService.currentTourStepDisplay === guidedTourService.currentTourSteps.indexOf(i) + 1 ? 'current' : ''"
                        >
                            <span>{{ guidedTourService.currentTourSteps.indexOf(i) }}</span>
                        </li>
                    </ul>
                </div>
                <button *ngIf="!guidedTourService.onLastStep && !guidedTourService.onResizeMessage" class="next-button" (click)="guidedTourService.nextStep()">
                    <span>{{ nextText }}</span>
                    <fa-icon icon="chevron-right"></fa-icon>
                </button>
                <button *ngIf="guidedTourService.onLastStep" class="next-button" (click)="guidedTourService.nextStep()">
                    {{ doneText }}
                </button>
                <button *ngIf="guidedTourService.onResizeMessage" class="next-button" (click)="guidedTourService.resetTour()">
                    {{ closeText }}
                </button>
            </div>
        </div>
    </div>
</div>
